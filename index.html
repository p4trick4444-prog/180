<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>æœ•å¤©ä¸‹ æˆ°ç¥è³½ç‰¹IIä½°æŒå°ˆå±¬å¤–æ›æ•¸æ“šæˆ¿</title>

<style>
body{
    font-family:"Microsoft JhengHei",Arial,sans-serif;
    margin:0;
    padding:12px;
    color:#fff;
    display:flex;
    justify-content:center;
    min-height:100vh;
    overflow:hidden;
    background:center/cover fixed no-repeat;
    transition:background-image .8s ease;
}

.container{
    max-width:1000px;
    width:100%;
    text-align:center;
    backdrop-filter:blur(2px);
}

/* æ¨™é¡Œ */
h1{
    color:#ffd700;
    text-shadow:0 0 20px rgba(255,215,0,1);
    margin-bottom:16px;
}

/* æŒ‰éˆ•ï¼ˆé»ƒé‡‘é›•åˆ»ï¼‰ */
button{
    width:220px;
    margin:6px;
    padding:14px;
    font-size:16px;
    font-weight:bold;
    border-radius:16px;
    cursor:pointer;
    border:2px solid #ffd700;
    background:linear-gradient(180deg,#fff2b0,#d4a400);
    color:#3b2b00;
    text-shadow:0 1px 0 #fff6c5;
    box-shadow:
        0 4px 14px rgba(255,215,0,.9),
        inset 0 2px 6px rgba(255,255,255,.9);
    transition:.25s;
}
button:hover:not(:disabled){transform:scale(1.05);}
button:disabled{opacity:.6;cursor:not-allowed;}

.buttons{margin-bottom:10px;}

/* ç‹€æ…‹æ–‡å­— */
.loading,.success{
    font-size:22px;
    color:#ffd700;
    margin:10px 0;
}
.success{display:none;}

/* é€²åº¦æ¢ */
#progressContainer{
    width:80%;
    height:16px;
    background:rgba(255,255,255,.25);
    border-radius:12px;
    margin:10px auto;
    overflow:hidden;
    display:none;
}
#progressBar{
    height:100%;
    width:0%;
    background:#ffd700;
    border-radius:12px;
}

/* æˆ¿é–“ */
.slot-container{
    display:none;
    grid-template-columns:repeat(3,1fr);
    gap:14px;
    margin-top:14px;
}
.slot{
    background:rgba(10,10,10,.88);
    padding:14px;
    border-radius:12px;
    display:flex;
    justify-content:space-between;
    opacity:0;
    transform:translateY(20px);
    transition:.4s;
}
.slot.show{opacity:1;transform:none;}

/* ğŸ”¥ 85%~93% äº®ç²‰ç´… */
.highest{
    border:2px solid #ff2f92;
    color:#ff2f92;
    box-shadow:
        0 0 35px rgba(255,47,146,1),
        inset 0 0 18px rgba(255,160,200,1);
}

/* ğŸ¥‡ 70%~74% äº®é‡‘è‰² */
.high{
    border:2px solid #ffd700;
    color:#ffd700;
    box-shadow:
        0 0 28px rgba(255,215,0,1),
        inset 0 0 14px rgba(255,235,150,1);
}

/* âšª å…¶é¤˜ */
.slot:not(.highest):not(.high){
    border:2px solid #ffffff;
    color:#ffffff;
    box-shadow:0 0 14px rgba(255,255,255,.6);
}

@media(max-width:768px){
    .slot-container{grid-template-columns:repeat(2,1fr);}
}
@media(max-width:480px){
    .slot-container{grid-template-columns:1fr;}
    button{width:100%;}
}
</style>
</head>

<body>
<div class="container">

<h1 id="mainTitle">æœ•å¤©ä¸‹ æˆ°ç¥è³½ç‰¹IIä½°æŒå°ˆå±¬å¤–æ›æ•¸æ“šæˆ¿</h1>

<div class="buttons">
    <button id="countBtn" onclick="handleRefresh()">äº”åˆ†é˜æ›ä¸€æ¬¡</button>
    <button onclick="toggleVer()">åˆ‡æ›ç‰ˆæœ¬ I / II</button>
</div>

<div id="loading" class="loading">çˆ†åˆ†æ©Ÿç‡è¨ˆç®—ä¸­â€¦ 0%</div>
<div id="success" class="success">çˆ†åˆ†æ©Ÿç‡è¨ˆç®—å®Œæˆ</div>

<div id="progressContainer">
    <div id="progressBar"></div>
</div>

<div id="slots" class="slot-container"></div>

</div>

<script>
let version="II";
let cooldown=300;
let cooling=false;
let timer=null;

function setBackground(){
    document.body.style.backgroundImage =
        version==="I" ? "url('bg1.jpg')" : "url('bg2.jpg')";
}

function randRoom(){return Math.floor(Math.random()*3000)+1;}

function generateData(){
    let arr=[];

    // ç²‰ç´… 85~93
    for(let i=0;i<3;i++){
        arr.push({
            room:randRoom(),
            rate:85+Math.floor(Math.random()*9),
            type:"highest"
        });
    }

    // é‡‘è‰² 70~74
    for(let i=0;i<7;i++){
        arr.push({
            room:randRoom(),
            rate:70+Math.floor(Math.random()*5),
            type:"high"
        });
    }

    while(arr.length<30){
        arr.push({
            room:randRoom(),
            rate:50+Math.floor(Math.random()*19),
            type:""
        });
    }

    return arr.sort(()=>Math.random()-.5);
}

function generate(){
    const slots=document.getElementById("slots");
    const loading=document.getElementById("loading");
    const success=document.getElementById("success");
    const bar=document.getElementById("progressBar");
    const barBox=document.getElementById("progressContainer");

    slots.innerHTML="";
    slots.style.display="grid";
    loading.style.display="block";
    success.style.display="none";
    barBox.style.display="block";
    bar.style.width="0%";

    const data=generateData();
    let done=0;

    data.forEach((d,i)=>{
        const div=document.createElement("div");
        div.className="slot "+d.type;
        div.innerHTML=`<span>ç¬¬ ${d.room} æˆ¿</span><span>${d.rate}%</span>`;
        slots.appendChild(div);

        setTimeout(()=>{
            div.classList.add("show");
            done++;
            const p=Math.floor(done/data.length*100);
            loading.innerText=`çˆ†åˆ†æ©Ÿç‡è¨ˆç®—ä¸­â€¦ ${p}%`;
            bar.style.width=p+"%";

            if(done===data.length){
                loading.style.display="none";
                success.style.display="block";
                barBox.style.display="none";
            }
        },i*50);
    });
}

function handleRefresh(){
    if(cooling) return;
    generate();
    startCooldown();
}

function startCooldown(){
    const btn=document.getElementById("countBtn");
    let t=cooldown;
    cooling=true;
    btn.disabled=true;

    timer=setInterval(()=>{
        btn.innerText=`${Math.floor(t/60)}:${String(t%60).padStart(2,"0")}`;
        t--;
        if(t<0){
            clearInterval(timer);
            btn.disabled=false;
            btn.innerText="äº”åˆ†é˜æ›ä¸€æ¬¡";
            cooling=false;
        }
    },1000);
}

function toggleVer(){
    version = version==="II" ? "I" : "II";
    document.getElementById("mainTitle").innerText =
        `æœ•å¤©ä¸‹ æˆ°ç¥è³½ç‰¹${version}ä½°æŒå°ˆå±¬å¤–æ›æ•¸æ“šæˆ¿`;
    setBackground();
    generate();
}

window.onload=()=>{
    setBackground();
    generate();
};
</script>

</body>
</html>
